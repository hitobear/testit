<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Navbar</title>
    <link rel="stylesheet" href="./main.css">
    <script src="//at.alicdn.com/t/font_570387_u4gt2gi29k40lik9.js"></script>
    <style>
    .loading{
    width:100px;
    height:100px;
    position:relative;
  }
  .loading::before,.loading::after{
    content:'';
    width:10px;
    height:10px;
    position:absolute;
    background:black;
    border-radius:50%;
    left:0;
    right:0;
    top:0;
    bottom:0;
    margin:auto;
    animation: s 1.5s linear infinite;
  }
  .loading::after{
    animation-delay:0.75s;
  }
  @keyframes s{
    0%{width:0px; height:0px; opacity:1;}
    100%{width:100px; height:100px; opacity:0;}
  }
    .site-welcome{
        display:none;
        position:fixed;
        left:0;
        top:0;
        width:100%;
        height:100%;
        z-index:1;
        background: #888;
        justify-content: center;
        align-items: center;
    }
    .site-welcome.active{
        display:flex;
    }
    </style>
</head>
<body>
    <div id="siteWelcome" class="site-welcome active"><div class="loading"></div></div>
    
    <div class="header clearfix" id="header">
        <div class="header-inner">
            <a class="logo" alt="logo" href="#">
                <span class="rs">RS</span>
                <span class="card">card</span>
             </a>
            <nav class="menu">
                <ul class="clearfix" >
                <li><a href="#siteAbout">关于</a></li>
                <li><a href="#skills">技能</a></li>
                <li><a href="#siteWorks">作品</a></li>
                <li class="menuTrigger">
                        <a href="#">博客</a>
                        <ol><li>博客1</li>
                        <li>博客2</li>
                        <li>博客3</li></ol>
                </li>
                <li><a href="#">日历</a></li>
                <li><a href="#">联系方式</a></li>
                <li><a href="#">其他</a></li>
                </ul>
            </nav>
        </div>
    </div>
    <div class="banner"><div class="mask"></div></div>
    <main>
        <div class="userCard" id="siteAbout">
            <div class="desc clearfix">
                <div class="picture">
                    <img src="./img/avatar.jpg" alt="头像" width="299" height="347">
                </div>
                <div class="desc-detail">
                    <span class="welcome">Hello<span class="triangle"></span></span>
                    <h1>李李</h1>
                    <p>开发工程师</p>
                    <hr>
                    <dl>
                        <dt>年龄</dt>
                        <dd>15</dd>
                        <dt>所在地</dt>
                        <dd>北京</dd>
                        <dt>邮箱</dt>
                        <dd>123123@qq.com</dd>
                        <dt>手机</dt>
                        <dd>18888888888</dd>
                    </dl>
                </div>
            </div>
            <footer class="media">
                    <a href="#">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-github"></use>
                        </svg>
                    </a>
                    <a href="#">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-twitter"></use>
                         </svg>
                    </a>
                    <a href="#">
                         <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-weibo"></use>
                         </svg>
                    </a>
            </footer>
        </div>
        <section class="text_btn">
                <a class="download" href="./main.css" download>Download Resume</a>
                <p class="text">
                    毕业于北京技术学校，主业前端，曾工作于某技术公司，掌握XXX，XX技术，主导过XXX产品的设计和开发
                </p>
        </section>
        <section id="skills">
            <h2>专业技能</h2>
            <div>
                <ul class="clearfix">
                    <li>
                        <div class="data">WordPress</div>
                        <div class="bar">
                            <span class="bar-fill wordpress"></span>
                        </div>
                    </li>
                    <li>HTML&CSS
                            <div class="bar">
                                    <span class="bar-fill html"></span>
                            </div>
                    </li>
                    <li>JavaScript
                            <div class="bar">
                                    <span class="bar-fill js"></span>
                                </div>
                    </li>
                    <li>PHP&Mysql
                            <div class="bar">
                                    <span class="bar-fill php"></span>
                                </div>
                    </li>
                    <li>Drupal
                            <div class="bar">
                                    <span class="bar-fill drupal"></span>
                                </div>
                    </li>
                    <li>Photoshop
                            <div class="bar">
                                    <span class="bar-fill"></span>
                                </div>
                    </li>
                </ul>
            </div>
        </section>
        <section class="portfolio" id="siteWorks">
                <h2>作品集</h2>
                <nav>
                    <ol class="clearfix">
                        <li id="portfolio1">所有</li>
                        <li id="portfolio2">框架</li>
                        <li id="portfolio3">原生JS/CSS</li>
                    </ol>
                    <div id="portfolioBar" class="bar state-1"></div>
                </nav>
                <div class="works" style="height: 597px;">
                        <div class="big" style="top: 0; left: 0;">
                          <img src="./img/1.jpg" alt="作品1">
                        </div>
                        <div class="small" style="top: 0; left: 645px;">
                          <img src="./img/2.jpg" alt="作品2">
                        </div>
                        <div class="small" style="top: 312px; left: 645px;">
                          <img src="./img/3.jpg" alt="作品3">
                        </div>
                </div>
        </section>
        <section class="message" id="message">
            <h2>留言</h2>
            
            <ol id="messageList">

            </ol>
            <form id="messageForm">
                <label for>姓名</label><input name="name" type="text" />
                <label for>内容</label><input name="content" type="text" />
                <button typ="submit">提交</button>
            </form>
        </section>
    </main>
<script src="//cdnjs.cloudflare.com/ajax/libs/tween.js/16.3.5/Tween.min.js"></script>
<script src="//cdn1.lncld.net/static/js/3.6.4/av-min.js"></script>
<script src="./js/message.js"></script>
<script>
    window.onscroll=function(event){
        if(window.scrollY>0){
          header.classList.add("sticky");
        }else{
            header.classList.remove("sticky");
        }
    }
    setTimeout(function(){
        siteWelcome.classList.remove("active");
    },1000)
    var liTags=document.querySelectorAll('nav.menu > ul > li');
    for(var i=0;i<liTags.length;i++){
      liTags[i].onmouseenter=function(e){
          e.currentTarget.classList.add("active");
      }
      liTags[i].onmouseleave=function(e){
          e.currentTarget.classList.remove("active");
      }
    }
    function animate(time) {
        requestAnimationFrame(animate);
        TWEEN.update(time);
    }
    requestAnimationFrame(animate);
    var anchors=document.querySelectorAll('nav.menu > ul > li >a');
    for(var i=0;i<anchors.length;i++){
        anchors[i].onclick=function(e){
            e.preventDefault();//重要，必须有，否则新效果无效
            var href=e.currentTarget.getAttribute('href');
            var section=document.querySelector(href);
            let top=section.offsetTop;
            var targetY=top-80;
            var currentY=window.scrollY;
            console.log("targetY:"+targetY);
            console.log("currentY:"+currentY);
            var t=Math.abs(300*(targetY-currentY)/100)
            if(t>300){
                t=300;
            }
           // window.scrollTo(0,top - 80);
            var coords = { x: 0, y: currentY }; // Start at (0, 0)
            var tween = new TWEEN.Tween(coords) // Create a new tween that modifies 'coords'.
                .to({ x: 0, y: targetY }, t) // Move to (300, 200) in 1 second.
                .easing(TWEEN.Easing.Quadratic.Out) // Use an easing function to make the animation smooth.
                .onUpdate(function() { // Called after tween.js updates 'coords'.
                   console.log("onupdate")
                   window.scrollTo( coords.x, coords.y);
                })
                .start(); // Start the tween immediately.
            }
    }

    portfolio1.onclick=function(){
        portfolioBar.className="bar state-1";
    }
    portfolio2.onclick=function(){
        portfolioBar.className="bar state-2";
    }
    portfolio3.onclick=function(){
        portfolioBar.className="bar state-3";
    }
</script>
</body>
</html>